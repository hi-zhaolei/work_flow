!function(a){var b,c;return(b=b||jQuery)?(c=document.getElementsByTagName("script"),c=c[c.length-1],c=c.src.split("/"),c.pop(),b.getScript(c.join("/")+"/dom.jsPlumb-1.6.2.js",function(){return a.init()})):alert("抱歉！无依赖jquery对象存在！")}({name:"work_flow",author:"leozhao",version:"1.1.0",instance:null,DATA:null,xmlDoc:null,selected:{length:0},config:{type:"ajax",url:"test.php",default_XML:'<?xml version="1.0" encoding="UTF-8"?><workflow name="engine_score_show_click" version="1"><node id="1" type="Start"></node><node id="2" type="End"/><variableHandler variable="params" class="VariableHandler"/></workflow>',default_ajax:{name:"new workflow",version:"1",nodes:{1:{id:"1",type:"Start",out:["3"]},2:{id:"2",type:"End"},3:{id:"3",type:"Action",string:"unknow",out:["4"]},4:{id:"4",type:"Action",string:"unknow",out:["5"]},5:{id:"5",type:"Action",string:"unknow",out:["2"]},length:5}},display:"workflow",debug:!1,submitUrl:"",submitBefore:function(){return!0},relationUrl:"",distance:120,radius:100,activityId:1,parent:"#jsPlumb_demo",listConfig:{},disabled:!1},storage:{isInit:!1,container:"#jsPlumb_demo_ctn",list:null,isAdd:!1,isEdit:!1,id:3,target:null},util:{sin:function(){return parseInt(1e3*Math.sin(arguments[0]*Math.PI/180))/1e3},cos:function(){return parseInt(1e3*Math.cos(arguments[0]*Math.PI/180))/1e3},position:function(a){var b;return a>90?(b=180-a,{x:Math.round(-this.radius*this.cos(b)),y:Math.round(this.radius*this.sin(b)),skew:90-b,angle:a,direction:-1}):90===a?{x:0,y:this.radius,skew:0,angle:90,direction:0}:{x:Math.round(this.radius*this.cos(a)),y:Math.round(this.radius*this.sin(a)),skew:90-a,angle:a,direction:1}},positions:function(a){var b,c,d;c=180/(a+1),b=[],d=this.radius,this.radius=d+d*(1-1/a);for(var e=0;a>e;e++)b.push(this.position(c+c*e));return this.radius=d,b}},init:function(){return jsPlumb_Z_config&&($.extend(this.config,jsPlumb_Z_config),this.config.debug&&(window.jsPlumb_Z=this)),document.getElementById("jsPlumb_demo")?($("#jsPlumb_demo").html(""),"workflow"===this.config.display?this.initWorkFlow():"rely"===this.config.display?this.initRelation():void 0):console.warning("没有可初始化目标，请配置id为jsPlumb_demo的区域，重新执行init方法！")},initWorkFlow:function(){return this.initDom().initCss().initEvent(),"XML"===this.config.type?(this.render(this.DATA=this.translate(this.getXMLDom())),this.initJsPlumb(),this.storage.isInit=!0):"ajax"===this.config.type?this.getAjax(function(a){return this.render(this.DATA=a),this.initJsPlumb(),this.storage.isInit=!0}):void 0},initRelation:function(){var a;return this.initRelationDom().initCss(),this.util.radius=this.config.radius,a=this,$("#jsPlumb_demo_ctn")[0].oncontextmenu=function(){return!1},$("#jsPlumb_demo").on("click",function(){return a.storage.list.hide()}),$("body").on("mouseup",".w",function(b){var c;return 2===b.button?(a.storage.target=$(this),c={},$.extend(c,a.DATA.nodes[this.id].urls||{}),a.renderMenu(c,{type:this.dataset.type}).css({left:b.pageX,top:b.pageY}).show()):void 0}),this.getAjax(function(a){return this.renderRelation(this.DATA=a),this.initJsPlumbRely()})},initDom:function(){var a;return a=this,$('<div id="jsPlumb_demo_buttons" style="position:absolute;top: 0;left:0; z-index:100"><button class="jsPlumb_btn" id="jsPlumb_add"><span class="icon"><span class="icon-plus"></span></span>添加</button><button class="jsPlumb_btn" id="jsPlumb_line"><span class="icon"><span class="icon-minus"></span></span>连线</button><button class="jsPlumb_btn" id="jsPlumb_translate"><span class="icon"><span class="icon-upload"></span></span>提交数据</button></div><div id="jsPlumb_demo_ctn"></div>').appendTo("#jsPlumb_demo"),this.storage.list=$('<ul id="jsPlumb_list" class="list-group"></ul>').appendTo("body").on("click","a",function(){return a.listEvent(this)}),this},initRelationDom:function(){return $('<div id="jsPlumb_demo_ctn"></div>').appendTo("#jsPlumb_demo"),this.storage.list=$('<ul id="jsPlumb_list" class="list-group"></ul>').appendTo("body"),this},initCss:function(){var a,b;return a="#jsPlumb_demo * { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;}#jsPlumb_demo { width:100%; -webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;outline:0; posi ; }#jsPlumb_demo_ctn{ position:relative; width:100%; outline:0;}.demo-move .w{cursor:move;}.w { cursor:default; border:3px solid #ccc; -moz-border-radius:1em;border-radius:1em;text-align:center;z-index:20; position:absolute;background-color:#eeeeef;color:black;font-family:helvetica;padding:0 10px;font-size:1em; line-height:3em;}.w.active { border-color:green;}.w > input{ width:80%; border:0; outline:0; background:none; -webkit-box-shadow:none!important;box-shadow:none!important;}.aLabel {-webkit-transition:background-color 0.25s ease-in;-moz-transition:background-color 0.25s ease-in;transition:background-color 0.25s ease-in;}.aLabel._jsPlumb_hover, ._jsPlumb_source_hover, ._jsPlumb_target_hover {background-color:#1e8151;color:white;}.aLabel {background-color:white; padding:1px 1em; font:12px sans-serif; color:#444;z-index:21;border:1px dotted gray;opacity:0.8;filter:alpha(opacity=80);cursor: pointer;}.statemachine-demo ._jsPlumb_endpoint {z-index:3;}.dragHover { border:2px solid orange; }.jsPlumb_btn{display: inline-block;margin-bottom: 0;font-weight: normal;text-align: center;vertical-align: middle;cursor: pointer;padding: 0 10px 0 10px;font-size: 14px;line-height: 30px;border: none;outline: none;background-color: #3498db;color: #fff;-webkit-transition: .25s;transition: .25s;}#jsPlumb_demo button.active,#jsPlumb_demo button.active:hover{background-color: #ccc;box-shadow: inset 1px 1px 5px #333;}#jsPlumb_demo button:hover{background-color: #2980b9;}path { cursor:pointer;}div[data-type=Start]{background:#3366FF; color:#fff;-moz-border-radius:50%;border-radius:50%;border:0}div[data-type=End]{ background:#FF3300;color:#fff;-moz-border-radius:50%;border-radius:50%; border:0}.jsPlumb_box{border:1px solid #ccc; position:absolute;}.list-group {position:absolute;padding-left: 0;margin-bottom: 20px;display:none;z-index : 101;}.list-group li {position: relative;display: block;margin-bottom: -1px;background-color: #fff;border: 1px solid #ddd; min-width:100px;}.list-group>li:first-child {border-top-left-radius: 4px;border-top-right-radius: 4px;}.list-group>li:last-child {margin-bottom: 0;border-bottom-right-radius: 4px;border-bottom-left-radius: 4px;}.list-group li a{display:block;padding: 5px 10px;font-size:12px;line-height:20px;text-decoration:none;color:#555;}.list-group li a:hover,.list-group li.active a{background:#3498db;color: #fff;}.list-group>li{ position:relative;}.list-group>li>b{float:right;line-height: 32px;margin-right: 5px;color: #555;}.list-group>li>ul{ display:none; position:absolute; min-width:100%; left:100%; top:0; z-index:101; padding:0; margin:0;}.list-group>li:hover>ul{ display:block;}.list-group>li>ul>li{ min-width:100px;}#jsPlumb_demo_buttons .jsPlumb_btn{padding: 0 10px 0 30px!important;}#jsPlumb_demo .icon {line-height: 100%;position: relative;display: block;float: left;margin-left:-18px;margin-top:6px;}.icon .icon-plus {top: 1px;left: 0;border-width: 0 4px 4px 0;}.icon .icon-plus,.icon .icon-plus:after {position: absolute;width: 9px;height: 9px;border-style: solid;border-color: #fff;box-sizing: border-box;}.icon .icon-plus:after {content: '';top: 5px;left: 5px;border-width: 4px 0 0 4px;}.icon .icon-minus {position: absolute;top: 6px;left: 0;width: 14px;height: 4px;background-color: #fff;}.icon-download, .icon-upload {position: absolute;left: 4px;top: 4px;width: 4px;height: 10px;background-color: #fff;}.icon-download:before, .icon-upload:before {content: '';position: absolute;left: -4px;width: 0;height: 0;border-width: 6px;border-style: solid;}.icon-upload:before {top: -9px;border-color: transparent transparent #fff transparent;}.icon-download:after, .icon-upload:after {content: '';position: absolute;left: -7px;width: 13px;height: 3px;border-width: 0 3px 2px 3px;border-style: solid;border-color: #fff;}.icon-upload:after {top: 9px;}",b=document.createElement("style"),b.type="text/css",b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a)),document.getElementsByTagName("head")[0].appendChild(b),this},initEvent:function(){var a;return a=this,$("#jsPlumb_demo_ctn")[0].oncontextmenu=function(){return!1},$("#jsPlumb_add").on("click",function(){return $("#jsPlumb_line").hasClass("active")&&$("#jsPlumb_line").trigger("click"),a.storage.isAdd?(a.storage.isAdd=!1,$(this).removeClass("active")):(a.storage.isAdd=!0,$(this).addClass("active"))}),$("#jsPlumb_line").on("click",function(){return $("#jsPlumb_add").hasClass("active")&&$("#jsPlumb_add").trigger("click"),$(this).hasClass("active")?($(this).removeClass("active"),a.instance.draggable($("#jsPlumb_demo_ctn .w")),a.instance.unmakeEverySource($("#jsPlumb_demo_ctn .w"))):($(this).addClass("active"),a.instance.destroyEveryDraggable($("#jsPlumb_demo_ctn .w")),a.instance.makeSource($("#jsPlumb_demo_ctn .w").not("#2"),{anchor:"Continuous",connector:["StateMachine"],isTarget:!0,maxConnections:5,uniqueEndpoint:!0})),!1}),$("#jsPlumb_translate").on("click",function(){var b;return b={},function(c){var d,e,f,g,h,i,j,k,l,m;for(h={id:c,type:$("#"+c).attr("data-type"),string:$("#"+c).html(),out:[]},k=a.instance.getConnections({source:c}),f=0,i=k.length;i>f;f++)e=k[f],h.out.push(e.targetId);if(b[h.id]=h,h.out){for(l=h.out,m=[],g=0,j=l.length;j>g;g++)d=l[g],m.push(arguments.callee(d));return m}}.call(this,"1"),b[1]&&delete b[1].string,b[2]&&(delete b[2].string,delete b[2].out),a.ajax({name:$("#Workflow_workflow_name").val(),nodes:b})}),$("#jsPlumb_demo_ctn").on("mousedown",function(b){return a.storage.list.is(":visible")?(a.storage.list.hide(),a.storage.target=this):(a.selected={length:0},$("#jsPlumb_demo .w").removeClass("active"),a.mousedown(b))}),$("#jsPlumb_demo_ctn").on("dblclick",".w",function(){return a.storage.isEdit||($("#jsPlumb_add").hasClass("active")&&$("#jsPlumb_add").trigger("click"),$("#jsPlumb_line").hasClass("active")&&$("#jsPlumb_line").trigger("click"),a.storage.isEdit=!0,a.storage.target=$(this),$(this).html('<input type="text" value="'+this.innerHTML+'">').children().focus()[0].selectionStart=99),!1}),$("#jsPlumb_demo_ctn").on("blur",".w input",function(){var b,c;return a.storage.isEdit=!1,b=$(this).parent(),c=this.value,b.html(c),a.DATA.nodes[b[0].id].string=c}),$("body").on("mouseup",".w",function(b){var c;return 2===b.button&&+this.id>2?(a.storage.target=$(this),c={},$.extend(c,a.DATA.nodes[this.id].urls||{},a.config.listConfig),a.renderMenu(c,{type:this.dataset.type||"Action"}).css({left:b.pageX,top:b.pageY}).show()):void 0}),$("#jsPlumb_demo_ctn").attr("tabindex",1).on("keydown",function(a){return function(b){var c,d;return a.storage.isEdit?13===b.keyCode?a.storage.target.find("input").blur():27===b.keyCode?(c=a.storage.target[0].id,a.storage.target.html(a.DATA.nodes[c]?a.DATA.nodes[c].string:""),a.storage.isEdit=!1):void 0:(d={76:function(){return $("#jsPlumb_line").trigger("click")},65:function(){return $("#jsPlumb_add").trigger("click")},27:function(){return $("#jsPlumb_add").hasClass("active")&&$("#jsPlumb_add").trigger("click"),$("#jsPlumb_line").hasClass("active")&&$("#jsPlumb_line").trigger("click"),a.selected.length?(a.selected={length:0},$("#jsPlumb_demo .w").removeClass("active")):void 0},8:function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p;if(a.selected.length){b=[],e=a.storage.id,m=a.selected;for(d in m)h=m[d],"length"!==d&&(h.id<e&&(e=h.id),b.push(h.innerHTML+"#"+h.id));if(confirm("确认删除"+b.join("，")+"么？")){a.storage.id=e,n=a.selected;for(d in n)if(h=n[d],"length"!==d){for(c=h.id,o=a.instance.getConnections({source:c}),i=0,k=o.length;k>i;i++)f=o[i],a.instance.detach(f);for(p=a.instance.getConnections({target:c}),j=0,l=p.length;l>j;j++)g=p[j],a.instance.detach(g);a.instance.removeElement(h),delete a.DATA.nodes[c]}}}return!1},46:function(){return this[8]()}},d[b.keyCode]&&d[b.keyCode]())}}(this)),this},listEvent:function(a){return a=$(a),a.parent().hasClass("jsPlumb_types")?(this.DATA.nodes[this.storage.target[0].id].type=a.html(),this.storage.target.attr("data-type",a.html()),this.storage.list.hide()):void 0},newWork:function(a){var b;for(b=this.storage.id;document.getElementById(b);)b++;return a.outerWidth()<80?a.remove():(a.attr({"class":"w jsplumb-draggable jsplumb-droppable",id:b,"data-type":"Action"}).css("height",52),$("#jsPlumb_line").hasClass("active")&&$("#jsPlumb_line").trigger("click"),this.instance.draggable(a),this.instance.makeTarget(a,{dropOptions:{hoverClass:"dragHover"},anchor:"Continuous"}),this.DATA.nodes[b]={id:b,string:"",type:"Action"})},mousedown:function(a){var b,c,d,e,f;return e=$("#jsPlumb_demo_ctn").offset().left,f=$("#jsPlumb_demo_ctn").offset().top,b=a.pageX-e,c=a.pageY-f,d=$('<div class="jsPlumb_box" style="left: '+b+"px;top:"+c+'px;"></div>').appendTo("#jsPlumb_demo_ctn"),$(document).on("mousemove",function(a){var g,h;return g=a.pageX-e,h=a.pageY-f,g>b?d.css("width",g-b):d.css({width:b-g,left:g}),h>c?d.css("height",h-c):d.css({height:c-h,top:h})}),$(document).on("mouseup",function(a){return function(g){var h,i,j;return h=g.pageX-e,i=g.pageY-f,$(document).off("mousemove").off("mouseup"),a.storage.isAdd?a.newWork(d):(d.remove(),Math.abs(b-h)>30&&Math.abs(c-i)>30?(j=[],h>b?(j[0]=b,j[2]=h):(j[0]=h,j[2]=b),i>c?(j[1]=c,j[3]=i):(j[1]=i,j[3]=c),a.filterSelected.apply(a,j)):void 0)}}(this))},filterSelected:function(a,b,c,d){var e;return e=this,$("#jsPlumb_demo .w").each(function(){var f,g,h,i,j;return"1"===(i=this.id)||"2"===i?!0:(f=$(this).offset(),g=f.top-$("#jsPlumb_demo_ctn").offset().top,j=g+$(this).outerHeight(),f=f.left-$("#jsPlumb_demo_ctn").offset().left,h=f+$(this).outerWidth(),j>b&&d>g&&h>a&&c>f&&($(this).addClass("active"),e.selected[this.id]=this,e.selected.length=e.selected.length+1),!0)})},getXMLDom:function(){var a;return a=new window.XMLHttpRequest,a.open("GET","BMP.xml",!1),a.send(null),4===a.readyState?this.xmlDoc=a.responseXML.documentElement:void 0},getAjax:function(a){return this.config.url?$.getJSON(this.config.url,null,function(b){return function(c){return a&&a.call(b,c)}}(this)):a.call(this,this.config.default_ajax)},ajax:function(a){var b;return b=this,this.config.submitUrl?confirm("数据将提交给后台，确认继续，取消将中断该操作")&&b.config.submitBefore&&b.config.submitBefore(a)?$.post(this.config.submitUrl,{data:JSON.stringify(a)},function(c){return+c?(alert("数据提交成功！"),b.config.submitAfter&&b.config.submitAfter(a,c)):alert(c)}):void 0:(console.log(a),console.log(JSON.stringify(a)),alert("未设置数据发送地址！请查看console校验数据！"))},translate:function(a){var b,c;return c={},c.name=$(a).attr("name"),c.version=$(a).attr("version"),c.nodes={},b=$(a).find("node").each(function(a){var b,d,e,f;return f={id:this.id,type:$(this).attr("type")},(e=$(this).find("string")).length&&(f.string=e.text()),(b=$(this).find("outNode")).length&&(d=[],b.each(function(){return d.push(this.id)}),f.out=d),c.nodes[f.id]=f,c.nodes.length=a+1,!0}),c},renderMenu:function(a,b){var c,d,e,f,g,h;if(a){d="";for(c in a)if(e=a[c],"[object String]"===toString.call(e))d+='<li><a href="'+e+'">'+c+"</a></li>";else{for(d+='<li><b>&raquo;</b><a href="javascript:;">'+c+"</a>",d+="<ul>",f=0,g=e.length;g>f;f++)h=e[f],d+='<li class="jsPlumb_types'+(b.type===h?" active":"")+'"><a href="javascript:;">'+h+"</a></li>";d+="</ul></li>"}return this.storage.list.html(d)}return this.storage.list},render:function(){var a,b,c,d;return b=this.config.distance,d={},c=0,a=arguments[0].nodes,function(a,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(l=a[e],e in d){for(-1===d[e].indexOf(f.p)&&d[e].push(f.p),t=$("#"+l.id),i=0,g=[],q=d[e],m=0,o=q.length;o>m;m++)k=q[m],s=$("#"+k).position().top,i=s>i?s:i;k=$("#"+d[e][0]),g=Math.round(k.position().left+k.width()/2+(d[e].length/2|0)*b-$("#"+l.id).width()/2),i=Math.round(i+b)}else d[e]=f?[f.p]:1,t=$('<div class="w jsplumb-draggable" id="'+l.id+'" data-type="'+l.type+'">'+(l.string||l.type)+"</div>").appendTo("#jsPlumb_demo_ctn"),i=f?Math.round(f.t):0,g=Math.round(f?f.l-t.width()/2:($("#jsPlumb_demo").width()-t.width())/2);if(t.css({top:i,left:g}),i>c&&(c=i),l.out)if(j=l.out.length/2,f={l:g+t.width()/2-(0|j)*b,t:i+b,p:l.id},l.out.length)for(r=l.out,n=0,p=r.length;p>n;n++)h=r[n],arguments.callee(a,h,{l:f.l+n*b+(l.out.length%2===0&&n>=j?b:0),t:f.t,p:f.p});else"Start"===l.type&&arguments.callee(a,2,f);return!0}.call(this,a,this.config.activityId),$("#jsPlumb_demo_ctn").height($("#2").position().top+60),this},filterRelationData:function(a){var b,c,d,e,f,g,h;a=JSON.parse(a),d="";for(b in a)if(e=a[b],d+='<div class="w jsplumb-draggable" id="'+e.id+'" data-type="'+e.type+'">'+e.string+"</div>",e.out)for(h=e.out,f=0,g=h.length;g>f;f++)c=h[f],c=a[c],c["in"]||(c["in"]=[],c._in={}),c["in"].push(e.id),c._in[e.id]=1;return $("#jsPlumb_demo_ctn").html(d),a},renderRelation:function(a){var b,c,d,e,f,g;return e=this.filterRelationData(JSON.stringify(a.nodes)),g={},b=$("#jsPlumb_demo").width()/2,d=0,f=this.config.radius,c={x:0,y:0,z:0},g={},function(a,b){var d,f,h,i,j,k,l,m,n,o,p;if(h=e[a],n=$("#"+h.id),g[a]||(b.direction?(d=n.outerWidth(),i={left:b.x-(b.direction>0?d:0),top:b.y-n.outerHeight()},b.x=i.left+d/2):i={left:b.x-n.outerWidth()/2,top:b.y-n.outerHeight()},$.extend(i,h.style),"Action"!==h.type&&(i["border-radius"]=0),n.css(i),c.x>i.left&&(c.x=i.left),c.y>i.top&&(c.y=i.top),g[a]=1),h["in"]){if(h.out)for(o=h["in"],f=k=0,m=o.length;m>k;f=++k)l=o[f],l===h.out[0]&&h["in"].splice(f,1);for(j=this.util.positions(h["in"].length),f=0,p=[];l=h["in"].shift();)arguments.callee.call(this,l,{x:Math.round(b.x-j[f].x),y:Math.round(b.y-j[f].y),skew:j[f].skew,angle:j[f].angle,direction:j[f].direction}),p.push(f++);return p}}.call(this,this.config.activityId,{x:b,y:d,skew:0,direction:0}),function(a,b){var d,f,h,i,j,k,l,m,n,o,p;if(h=e[a],m=$("#"+h.id),g[a]||(b.direction?(d=m.outerWidth(),i={left:b.x-(b.direction<0?d:0),top:b.y},b.x=i.left+d/2):i={left:b.x-m.outerWidth()/2,top:b.y},m.css($.extend(i,h.style,{"border-radius":"Action"!==h.type?0:"1em",border:"none"})),h.attr&&m.attr(h.attr),c.x>b.x&&(c.x=b.x),c.z<b.y&&(c.z=b.y),g[a]=1),h.out){if("Action"!==h.type)for(o=h.out,f=k=0,l=o.length;l>k;f=++k)n=o[f],n in h._in&&h.out.splice(f,1);for(j=this.util.positions(h.out.length).reverse(),f=0,p=[];n=h.out.shift();)arguments.callee.call(this,n,{x:b.x+j[f].x,y:b.y+j[f].y,skew:j[f].skew,angle:j[f].angle,direction:j[f].direction}),p.push(f++);return p}}.call(this,this.config.activityId,{x:b,y:d,skew:0,direction:0}),$("#jsPlumb_demo_ctn").css({top:Math.abs(c.y),left:Math.abs(c.x)}).parent().css({height:Math.abs(c.y)+c.z+60})},initJsPlumb:function(){var a,b,c,d,e,f;this.instance=a=jsPlumb.getInstance({anchor:"Continuous",connector:["StateMachine"],PaintStyle:{strokeStyle:"#5c96bc",lineWidth:2,outlineColor:"transparent",outlineWidth:4},HoverPaintStyle:{strokeStyle:"#1e8151",lineWidth:2},ConnectionOverlays:[["Arrow",{location:1,id:"arrow",width:14,length:10,foldback:.8}],["Label",{label:"FOO",id:"label",cssClass:"aLabel"}]],Endpoint:["Dot",{radius:2}],Container:"jsPlumb_demo_ctn"}),a.draggable($("#jsPlumb_demo_ctn .w")),a.bind("connection",function(a){return a.connection.getOverlay("label").setLabel(a.target.id)}),a.bind("click",function(b){return confirm("确认删除链接 从 "+b.sourceId+" 到 "+b.targetId+"?")?a.detach(b):void 0}),a.bind("connectionDrag",function(b){var c,d,e,f,g;for(f=a.getConnections({source:b.sourceId}),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(a.unmakeTarget($("#"+c.targetId)));return g}),a.bind("connectionDragStop",function(b){var c,d,e,f,g;for(f=a.getConnections({source:b.sourceId}),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(a.makeTarget($("#"+c.targetId)));return g}),a.makeTarget($("#jsPlumb_demo_ctn .w").not("#1"),{dropOptions:{hoverClass:"dragHover"},anchor:"Continuous"}),c=this.DATA.nodes,f=[];for(b in c)e=c[b],f.push(e.out?function(){var b,c,f,g;for(f=e.out,g=[],b=0,c=f.length;c>b;b++)d=f[b],g.push(a.connect({source:e.id,target:d},{anchor:"Continuous",connector:["StateMachine"]}));return g}():void 0);return f},initJsPlumbRely:function(){var a,b,c,d,e,f;this.instance=a=jsPlumb.getInstance({anchor:"Continuous",connector:["StateMachine"],PaintStyle:{strokeStyle:"#5c96bc",lineWidth:2,outlineColor:"transparent",outlineWidth:4},HoverPaintStyle:{strokeStyle:"#1e8151",lineWidth:2},ConnectionOverlays:[["Arrow",{location:1,id:"arrow",width:14,length:10,foldback:.8}]],Endpoint:["Dot",{radius:2}],Container:"jsPlumb_demo_ctn"}),a.draggable($("#jsPlumb_demo_ctn .w")),e=this.DATA.nodes,f=[];for(b in e)d=e[b],f.push(d.out?function(){var b,e,f,g;for(f=d.out,g=[],b=0,e=f.length;e>b;b++)c=f[b],g.push(a.connect({source:""+d.id,target:""+(c.id||c)},{anchor:"Continuous",connector:["StateMachine"]}));return g}():void 0);return f}});